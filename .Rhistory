qbx = t(apply(bx,2,function(xx){return(quantile(xx,probs=c(0.025,0.5,0.975)))}))
qbx
qnx = t(apply(nx,2,function(xx){return(quantile(xx,probs=c(0.025,0.5,0.975)))}))
qnx
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_sensitivity.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_sensitivity.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_sensitivityByArea.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_sensitivityByArea.r', echo=TRUE)
bx = (apply(simBC_cspjya[1,1:nr,,ji,,]/1000000,c(1,3),sum))
bx = (apply(simBC_cspjya[1,1:nr,,,,]/1000000,c(1,4),sum))
qbx = t(apply(bx,2,function(xx){return(quantile(xx,probs=c(0.025,0.5,0.975)))}))
qbx
quantile(apply(simBC_cspjya[1,1:nr,,,46,]/1000000,c(1),sum),probs=c(0.025,0.975))
quantile(apply(simBC_cspjya[1,1:nr,,,46,]/1000000,c(1),sum),probs=c(0.025,0.975))[1]
round(quantile(apply(simBC_cspjya[1,1:nr,,,46,]/1000,c(1),sum),probs=c(0.025,0.975))[1],1)
round(quantile(apply(simBC_cspjya[1,1:nr,,,46,]/1000,c(1),sum),probs=c(0.025,0.975))[1],-3)
round(quantile(apply(simBC_cspjya[1,1:nr,,,46,]/1000,c(1),sum),probs=c(0.025,0.975))[1],-2)
round(quantile(apply(simBC_cspjya[1,1:nr,,,46,]/1000,c(1),sum),probs=c(0.025,0.975))[2],-2)
round(quantile(apply(simNC_cspjya[1,1:nr,,,46,]/100000,c(1),sum),probs=c(0.025,0.975))[2],1)
round(quantile(apply(simNC_cspjya[1,1:nr,,,46,]/1000000,c(1),sum),probs=c(0.025,0.975))[2],1)
round(quantile(apply(simNC_cspjya[1,1:nr,,,46,]/1000000,c(1),sum),probs=c(0.025,0.975))[1],1)
round(quantile(apply(simBC_cspjya[1,1:nr,1,,46,]/1000,c(1),sum),probs=c(0.025,0.975))[2],-2)
round(quantile(apply(simBC_cspjya[1,1:nr,1,,46,]/1000,c(1),sum),probs=c(0.025,0.975))[1],-2)
round(quantile(apply(simNC_cspjya[1,1:nr,2,,46,]/1000000,c(1),sum),probs=c(0.025,0.975))[1],1)
round(quantile(apply(simBC_cspjya[1,1:nr,2,6,46,]/1000000,c(1),sum),probs=c(0.025,0.975))[1],1)
round(quantile(apply(simBC_cspjya[1,1:nr,1,6,46,]/1000000,c(1),sum),probs=c(0.025,0.975))[1],1)
round(quantile(apply(simBC_cspjya[1,1:nr,1,6,46,]/1000000,c(1),sum),probs=c(0.025,0.975))[2],1)
round(quantile(apply(simBC_cspjya[1,1:nr,,6,46,]/1000000,c(1),sum),probs=c(0.025,0.975))[2],1)
round(quantile(apply(simBC_cspjya[1,1:nr,,6,46,]/1000000,c(1),sum),probs=c(0.025,0.975))[1],1)
round(quantile(apply(simNC_cspjya[1,1:nr,,5,46,]/1000000,c(1),sum),probs=c(0.025,0.975))[1],1)
round(quantile(apply(simNC_cspjya[1,1:nr,,5,46,]/1000000,c(1),sum),probs=c(0.025,0.975))[2],1)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
barplot(1975:2015,t(apply(NC_phjromyta[,,,,,,6:46,,],c(1,7),sum)/1000000),
myLegend = FALSE,
col=myCols,
ylab="Numbers (millions)",
las=1)
barplot(1975:2015,(apply(NC_phjromyta[,,,,,,6:46,,],c(1,7),sum)/1000000),
myLegend = FALSE,
col=myCols,
ylab="Numbers (millions)",
las=1)
text(2010,140, paste("(",letters[2],")"))
(apply(NC_phjromyta[,,,,,,6:46,,],c(1,7),sum)/1000000)
(apply(NC_phjromyta[,,,,,,6:46,,],c(1,7),sum)/1000000)
barplot(1975:2015,(apply(NC_phjromyta[,,,,,,6:46,,],c(1,7),sum)/1000000),
myLegend = FALSE,
col=myCols,
ylab="Numbers (millions)",
las=1)
barplot(1975:2015,(apply(NC_phjromyta[,,,,,,6:46,,],c(1,7),sum)/1000000),
col=myCols,
ylab="Numbers (millions)",
las=1)
text(2010,140, paste("(",letters[2],")"))
barplot(1975:2015,(apply(NC_phjromyta[,,,,,,6:46,,],c(1,7),sum)/1000000),
col=myCols,
ylab="Numbers (millions)",
las=1)
barplot(1975:2015,t(apply(NC_phjromyta[,,,,,,6:46,,],c(1,7),sum)/1000000),
col=myCols,
ylab="Numbers (millions)",
las=1)
NC_hy
NC_hy = apply(NC_phjromyta[,i,,,,,,,3:6],c(4,6), sum)
NC_hy = NC_hy[,6:46]/1000000
barplot(1975:2015,t(apply(BC_phjromyta[,,,,,,6:46,,],c(1,7),sum)/1000000),
legend = predNames,
#        myLegend = TRUE,
col=myCols,
cex.axis=1.2,
cex.lab=1.2,
las=1,
ylab="Biomass (1000s tons)")
?boxplot
barplot(1975:2015,t(apply(NC_phjromyta[,,,,,,6:46,,],c(1,7),sum)/1000000),
beside=FALSE,
col=myCols,
ylab="Numbers (millions)",
las=1)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
NC_hy
barplot(NC_hy)
myCol = colorRampPalette(brewer.pal(8, "Spectral"))(4)
myCols = c(grey(0),grey(0.33), grey(0.66), grey(0.9))[4:1]
barplot(t(apply(BC_phjromyta[,,,,,,6:46,,],c(1,7),sum)/1000000),
legend = predNames,
#        myLegend = TRUE,
col=myCols,
cex.axis=1.2,
cex.lab=1.2,
las=1,
ylab="Biomass (1000s tons)")
text(2010,38, paste("(",letters[1],")"))
barplot((apply(BC_phjromyta[,,,,,,6:46,,],c(1,7),sum)/1000000),
legend = predNames,
#        myLegend = TRUE,
col=myCols,
cex.axis=1.2,
cex.lab=1.2,
las=1,
ylab="Biomass (1000s tons)")
text(2010,38, paste("(",letters[1],")"))
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
dev.off()
dev.off()
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/Figure_1_results.r', echo=TRUE)
round(quantile(apply(simNC_cspjya[1,1:nr,3:4,3,46,3:6]/1000,c(1),sum),probs=c(0.025,0.975))[1],-2)
round(quantile(apply(simNC_cspjya[1,1:nr,3:4,3,46,3:6]/1000,c(1),sum),probs=c(0.025,0.975))[1],0)
round(quantile(apply(simNC_cspjya[1,1:nr,3:4,3,46,3:6]/1000,c(1),sum),probs=c(0.025,0.975))[2],0)
round(quantile(apply(simNC_cspjya[1,1:nr,3:4,3,46,2:6]/1000,c(1),sum),probs=c(0.025,0.975))[2],0)
round(quantile(apply(simNC_cspjya[1,1:nr,3:4,3,46,3:6]/1000,c(1),sum),probs=c(0.025,0.975))[2],0)
round(sum(NC_phjromyta[,,,,,,6,,3:6]),0)
round(sum(BC_phjromyta[,,,,,,46,,3:6]),0)
round(sum(BC_phjromyta[,,6,,,,46,,3:6]),0)
round(sum(BC_phjromyta[,,6,,,,6,,3:6]),0)
round(sum(NC_phjromyta[,,6,,,,6,,3:6]),0)
round(sum(NC_phjromyta[,,6,,,,46,,3:6]),0)
round(sum(NC_phjromyta[,,6,,,,6,,3:6]),0)
round(sum(NC_phjromyta[,,6,,,,46,,3:6]),0)
round(sum(NC_phjromyta[,,3,,,,6,,3:6]),0)
round(sum(NC_phjromyta[,,3,,,,46,,3:6]),0)
round(sum(NC_phjromyta[,,3,,,,46,,3:6]),0)/
round(sum(NC_phjromyta[,,3,,,,6,,3:6]),0)
round(sum(NC_phjromyta[,,3,,,,46,,3:6])/sum(NC_phjromyta[,,3,,,,6,,3:6]),-2)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_sensitivity.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_sensitivityByArea.r', echo=TRUE)
knitr::opts_chunk$set(echo = TRUE)
source("results_plot_harvestVsPredatorConsumption_MarshallWard.r")
source("results_plot_harvestVsPredatorConsumption_MarshallWard.r")
source("Figure_1_results.r")
source("results_plot_harvestVsPredatorConsumption_MarshallWard.r")
source("results_plot_BasePeriodChinookAvailability.r")
source("results_plot_killerWhaleConsumptionByArea.r")
source("buildModel.r")
source("plotSalmonProduction.r")
source('C:/CHASCO/PROJECTS/COAST_WIDE/buildModel.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_totalConsumptionNumbersAndBiomass.r', echo=TRUE)
source("plotCoastalPresentationMap.r")
source("plotSalmonProduction.r")
source("results_plot_totalConsumptionNumbersAndBiomass.r")
source("results_plot_harvestVsPredatorConsumption_MarhsallWard.r")
source("results_plot_harvestVsPredatorConsumption_MarshallWard.r")
source("results_plot_BasePeriodChinookAvailability.r")
source("results_plot_KillerWhales_WardHanson.r")
source("results_plot_KillerWhales_WardHanson.r")
source("results_plot_sensitivity.r")
source("results_plot_sensitivityByArea.r")
qbx[6:46,]
qbx
bx = (apply(simBC_cspjya[1,1:nr,,ji,,]/1000000,c(1,3),sum))
bx
nr
length(na.omit(simBC_cspjya[1,,1,1,1,1]))
simBC_cspjya[1,,1,1,1,1]
simBC_cspjya
dim(simBC_cspjya)
load("simOutput.Rdata", envir = parent.frame(), verbose = FALSE)
dim(simBC_cspjya)
load("simOutput.Rdata", verbose = FALSE)
nr = length(na.omit(simBC_cspjya[1,,1,1,1,1]))
nr
source("results_plot_sensitivity.r")
source("results_plot_sensitivityByArea.r")
source("results_plot_BasePeriodChinookAvailability.r")
source('C:/CHASCO/PROJECTS/COAST_WIDE/plotCoastalPresentationMap.r', echo=TRUE)
source("results_plot_totalConsumptionNumbersAndBiomass.r")
source("buildModel.r")
round(sum(BC_phjromyta[,,,,,,46,,])/1000,-2)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_sensitivityByArea.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_sensitivityByArea.r', echo=TRUE)
install.packages("scales")
install.packages("scales")
install.packages("scales")
library(scales)
comma_format(1000)
comma(1000)
comma(100)
Chinook salmon biomass consumed by the marine mammal predators was estimated to have increased steadily over the entire study period from `r comma(round(sum(BC_phjromyta[,,,,,,6,,])/1000,-2)) ` to `r comma(round(sum(BC_phjromyta[,,,,,,46,,])/1000,-2)) ` metric tons (Figure 3). The estimated increase in predation was directly related to increasing predator abundance.  Killer whales increased from `r comma(round(sum(N_phy[1,,6]),-2))`  to `r comma(round(sum(N_phy[1,,46]),-2))`   individual resident killer whales, harbor seals increased from `r round(sum(N_phy[2,,6]),-2)` to `r round(sum(N_phy[2,,46]),-2)` , California sea lions ages (6 years of age) increased from `r round(sum(N_phy[3,,6]),-2)` to `r round(sum(N_phy[3,,46]),-2)`, and Steller sea lions increased from `r round(sum(N_phy[4,,6]),-2)` to `r round(sum(N_phy[4,,46]),-2)` . Killer whales consumed the most Chinook salmon biomass (from `r round(sum(BC_phjromyta[1,,,,,,6,,])/1000,-2) `  metric tons in 1975 to `r round(sum(BC_phjromyta[1,,,,,,46,,])/1000,-2) ` metric tons in 2015), followed by harbor seals (`r round(sum(BC_phjromyta[2,,,,,,6,,])/1000,-2) `  to `r round(sum(BC_phjromyta[2,,,,,,46,,])/1000,-2) ` metric tons), Steller sea lions (`r round(sum(BC_phjromyta[4,,,,,,6,,])/1000,-2) `  to `r round(sum(BC_phjromyta[4,,,,,,46,,])/1000,-2) ` metric tons), and California sea lions (`r round(sum(BC_phjromyta[3,,,,,,6,,])/1000,-1) ` to `r round(sum(BC_phjromyta[3,,,,,,46,,])/1000,-2) ` metric tons). Numerically, the predator consumption increased from `r round(sum(NC_phjromyta[,,,,,,6,,])/1000000,1) ` to `r round(sum(NC_phjromyta[,,,,,,46,,])/1000000,1) ` million individual Chinook salmon of varying ages (Figure 3).   This was largely driven by increased consumption by harbor seals  (from `r round(sum(NC_phjromyta[2,,,,,,6,,])/1000000,1) `  million to `r round(sum(NC_phjromyta[2,,,,,,46,,])/1000000,1) ` million individual Chinook salmon), followed by killer whales (`r round(sum(NC_phjromyta[1,,,,,,6,,])/1000000,1) `  million to `r round(sum(NC_phjromyta[1,,,,,,46,,])/1000000,1) `), California sea lions (`r round(sum(NC_phjromyta[3,,,,,,6,,])/1000000,1) `  million to `r round(sum(NC_phjromyta[3,,,,,,46,,])/1000000,1) `), and Steller sea lions (`r round(sum(NC_phjromyta[4,,,,,,6,,])/1000000,1) `  million to `r round(sum(NC_phjromyta[4,,,,,,46,,])/1000000,1) `).
) `
comma(round(sum(BC_phjromyta[,,,,,,6,,])/1000,-2)))
?load
comma(round(quantile(apply(simBC_cspjya[1,1:nr,,,46,]/1000,c(1),sum),probs=c(0.025,0.975))[2],-2))
comma(round(quantile(apply(simNC_cspjya[1,1:nr,3:4,3,46,3:6]/1000,c(1),sum),probs=c(0.025,0.975))[1],0))
comma(round(quantile(apply(simNC_cspjya[1,1:nr,3:4,3,46,3:6]/1000,c(1),sum),probs=c(0.025,0.975))[2],0))
source("Create_Nphyis.r") #Abundance
comma(round(quantile(apply(simNC_cspjya[1,1:nr,3:4,3,46,3:6]/1000,c(1),sum),probs=c(0.025,0.975))[1],0))
source("Create_Nphyis.r") #Abundance
source("Create_Mphis.r") #Mass
source("Create_ALPHApis.r") #KleiberMultiplier
source("Create_EPphis.r") #Energetic demands of predator by weight
source("create_FRAM_MAThra.r") #The conditional probability of maturing-at-age a
source("Create_SELpjta_basedOnmaturationSchedule.r") #Selectivity of different age classes
source("Create_SELpjta_basedOnmaturationSchedule.r") #Selectivity of different age classes
source("Create_Nphyis.r") #Abundance
source("Create_Mphis.r") #Mass
source("Create_ALPHApis.r") #KleiberMultiplier
source("Create_EPphis.r") #Energetic demands of predator by weight
source("create_FRAM_MAThra.r") #The conditional probability of maturing-at-age a
source("Create_SELpjta_basedOnmaturationSchedule.r") #Selectivity of different age classes
source("Create_FECpjt.r") #Fraction from Chinook energy based on diets.
source("Create_PHIphjts.r") #Spatial and temporal distribution
source("Create_EDphjytias.r") #Total energetics demands of the predators by home area, area, time, predator age, age, and sex.
source("create_ESCThrt.r")  #Create the escapement timing
source("create_ESCDhj.r")  #Create the fraction of the escapement coming from the different areas
source("create_THETAhjromta.r") #Chinook salmon distribution model
source("create_Rhroy.r") #Smolt abundance in each year
source("create_Rhroy.r") #Smolt abundance in each year
source("create_SMThryt.r") #Smolt timing
source("create_SMTLhryt.r") #Smolt lengths
source("create_CLAhromta.r") #Chinook length at age based on the FRAM model input
source("create_EChromta.r") #Chinook energy model
knitr::opts_chunk$set(echo = TRUE)
source("plotCoastalPresentationMap.r")
library(viridis)
library(scales)
source("plotCoastalPresentationMap.r")
source("plotSalmonProduction.r")
source("results_plot_totalConsumptionNumbersAndBiomass.r")
source("results_plot_harvestVsPredatorConsumption_MarshallWard.r")
source('C:/CHASCO/PROJECTS/COAST_WIDE/plotSalmonProduction.r', echo=TRUE)
dev.off()
dev.off()
source('C:/CHASCO/PROJECTS/COAST_WIDE/plotSalmonProduction.r', echo=TRUE)
round(sum(N_phy[2,5,6]),-3)
sum(BC_phjromyta[1,,6,,,,46,,])
comma(round((sum(BC_phjromyta[1,,6,,,,46,,])-sum(BC_phjromyta[1,,6,,,,6,,])) /1000,-2))
source('C:/CHASCO/PROJECTS/COAST_WIDE/buildModel.r', echo=TRUE)
apply(BC_phjromyta[1,,,,,,,,2:nAges], c(6), sum)/1000
comma(round((sum(BC_phjromyta[1,,,,,,46,,]),-2))
comma(round(sum(BC_phjromyta[1,,,,,,46,,]),-2))
comma(round(sum(BC_phjromyta[,,,,,,46,,])/1000,-2))
comma(round(sum(BC_phjromyta[4,,,,,,46,,])/1000,-2))
comma(round(sum(BC_phjromyta[3,,,,,,46,,])/1000,-2))
FEC_pjt[3,,]
FEC_pjt[3,,]*0.2
FEC_pjt[4,,]*0.2
comma(round(sum(BC_phjromyta[2,,,,,,46,,])/1000,-2))
comma(round(sum(BC_phjromyta[1,,,,,,46,,])/1000,-2))
comma(round(sum(BC_phjromyta[,,,,,,46,,])/1000,-2))
comma(round(sum(BC_phjromyta[,,,,,,6,,])/1000,-2))
comma(round(sum(NC_phjromyta[,,,,,,6,,])/1000,-2))
comma(round(sum(NC_phjromyta[,,,,,,46,,])/1000,-2))
SEL_pjta[1,,,1]
SEL_pjta[2,,,1]
SEL_pjta[3,,,1]
SEL_pjta2[3,,,1]
apply(SEL_pjta[1,,,],c(1,3),mean)
apply(SEL_pjta[2,,,],c(1,3),mean)
apply(SEL_pjta[3,,,],c(1,3),mean)
apply(SEL_pjta[4,,,],c(1,3),mean)
apply(NC_phjromyta[,,,,,,,46,,1], c(1), sum)
apply(NC_phjromyta[,,,,,,46,,1], c(1), sum)
mean(SMTL_hryt)
apply(NC_phjromyta[,,,,,,46,,1], c(1), sum)
stx = read.csv("Smolt_AllData.csv")
names(stx)
mean(stx$avg_length[stx$avg_length>0])
mean(na.omit(stx$avg_length[stx$avg_length>0]))
source('C:/CHASCO/PROJECTS/COAST_WIDE/create_EDphjytias.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/create_EDphjytias.r', echo=TRUE)
corrected_FEC_pjt[1,,]
corrected_FEC_pjt[2,,]
round(corrected_FEC_pjt[2,,],3)
round(corrected_FEC_pjt[3,,],3)
round(corrected_FEC_pjt[4,,],3)
round(corrected_FEC_pjt[4,,],4)
round(corrected_FEC_pjt[4,,],4)
round(corrected_FEC_pjt[4,,],6)
round(corrected_FEC_pjt[4,,],6)
round(corrected_FEC_pjt[3,,],6)
round(corrected_FEC_pjt[2,,],6)
source('C:/CHASCO/PROJECTS/COAST_WIDE/buildModel.r', echo=TRUE)
apply(NC_phjromyta[,,,,,,46,,1], c(1), sum)
apply(NC_phjromyta[,,,,,,,,], c(7), sum)
apply(BC_phjromyta[,,,,,,,,], c(7), sum)
apply(BC_phjromyta[,,,,,,,,], c(7), sum)/1000
dev.off()
dev.off()
source('C:/CHASCO/PROJECTS/COAST_WIDE/buildModel.r', echo=TRUE)
source("plot_CoastalPresentationMap.r")
source("plot_SalmonProduction.r")
source("results_plot_totalConsumptionNumbersAndBiomass.r")
source("results_plot_totalConsumptionNumbersAndBiomass.r")
source("results_plot_harvestVsPredatorConsumption_MarshallWard.r")
source("results_plot_harvestVsPredatorConsumption_MarshallWard.r")
source("results_plot_KillerWhales_WardHanson.r")
apply(BC_phjromyta[1,,,,,,,,2:nAges], c(6), sum)/1000
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_KillerWhales_WardHanson.r', echo=TRUE)
dev.off()
1100000/250000
apply(CLA_hromta,c(6),mean)
source('C:/CHASCO/PROJECTS/COAST_WIDE/buildModel.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_KillerWhales_WardHanson.r', echo=TRUE)
matplot(1975:2015,
t(RatioC_jy[c(5:8),]),
col = myCol[5:8],
ylab="Relative prey availability",
type="l",
lwd=2,
las=1,
xlab="",
lty=1,
xlim=c(1974.9,2015),
yaxs="i",
xaxs="i",
axes=FALSE)
axis(1, cex.axis=1.3)
axis(2,, cex.axis=1.3, las=1)
abline(v=1975)
abline(h=1)
dev.off()
matplot(1975:2015,
t(RatioC_jy[c(5:8),]),
col = myCol[5:8],
ylab="Relative prey availability",
type="l",
lwd=2,
las=1,
xlab="",
lty=1,
xlim=c(1974.9,2015),
yaxs="i",
xaxs="i",
axes=FALSE)
axis(1, cex.axis=1.3)
axis(2,, cex.axis=1.3, las=1)
abline(v=1975)
abline(h=1)
RatioC_jy = RatioC_jy/(RatioC_jy[5,1])
matplot(1975:2015,
t(RatioC_jy[c(5:8),]),
col = myCol[5:8],
ylab="Relative prey availability",
type="l",
lwd=2,
las=1,
xlab="",
lty=1,
xlim=c(1974.9,2015),
yaxs="i",
xaxs="i",
cex.lab=1.3,
axes=FALSE)
axis(1, cex.axis=1.3)
axis(2,cex.axis=1.3, las=1)
abline(v=1975)
abline(h=1)
text(2011,23,"(a)")
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_KillerWhales_WardHanson.r', echo=TRUE)
dev.off()
myCols
source('C:/CHASCO/PROJECTS/COAST_WIDE/buildModel.r', echo=TRUE)
knitr::opts_chunk$set(echo = TRUE)
harv = read.csv("HarvestFromPMFC.csv")
tharv = xtabs(harv$catch~harv$Year)
tharv
tharv
tharv[22]
tharv[24]
length(tharv)
x2
aveCatchAgeComp = c(0,	0,	0.34894334,	0.504058796,	0.138639957,	0.008357908)
aveLen = apply(CLA_hromta[,c(1:4,9),,,6,], c(5), mean)
x2 = colSums(t(tharv%o%aveCatchAgeComp) * exp((log(0.000011 * aveLen^3.12)-7.56)/0.94)) #based on high lipid equation from Sandra Oneill #2014
x2
x2/1000
source('C:/CHASCO/PROJECTS/COAST_WIDE/buildModel.r', echo=TRUE)
BC_hy = apply(BC_phjromyta[,,,,,,,,3:6],c(7),sum)
BC_hy = BC_hy[6:46]/1000000
NC_hy = apply(NC_phjromyta[,,,,,,,,3:6],c(7), sum)
NC_hy = NC_hy[6:46]/1000000
#bar plot of Numbers consumed
barplot(NC_hy,
space=0,
las=1,
xaxs="i",
yaxs="i",
axes=FALSE,
ylim=c(0,1.3),
ylab="",
xlab="",
names.arg = rep("",41),
col=c(grey(0.95),"darkgrey"),
border=c(grey(0.95),"darkgrey")
)
NC_hy
#Biomass and numbers consumed
BC_hy = apply(BC_phjromyta[,,,,,,,,3:6],c(5,7),sum)
BC_hy = BC_hy[,6:46]/1000000
NC_hy = apply(NC_phjromyta[,,,,,,,,3:6],c(5,7), sum)
NC_hy = NC_hy[,6:46]/1000000
#bar plot of Numbers consumed
barplot(NC_hy,
space=0,
las=1,
xaxs="i",
yaxs="i",
axes=FALSE,
ylim=c(0,1.3),
ylab="",
xlab="",
names.arg = rep("",41),
col=c(grey(0.95),"darkgrey"),
border=c(grey(0.95),"darkgrey")
)
tharv
harv = read.csv("HarvestFromPMFC.csv")
harv = harv[harv[,1]>1974,]
tharv = xtabs(harv$catch~harv$Year + harv$area)
tharv
rowSums(tharv)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
rowSums(tharv)/1000000
NC_hy
colSums(NC_hy)
NC_hy = apply(NC_phjromyta[,,,,,,,,3:6],c(5,7), sum)
NC_hy = NC_hy[,6:46]/1000000
colSums(NC_hy)
lm1
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
round(tharv[64]/1000000,1)
round(tharv[24]/1000000,1)
tharv
round(rowSums(tharv)[64]/1000000,1)
rowSums(tharv)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_harvestVsPredatorConsumption_MarshallWard.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/buildModel.r', echo=TRUE)
comma(round(sum(BC_phjromyta[1,,,,,,46,,])/1000,-2))
round(sum(BC_phjromyta[1,,,,,,46,,])/1000,-2)
round(sum(BC_phjromyta[,,,,,,46,,])/1000
round(sum(BC_phjromyta[,,,,,,46,,])/1000,-2)
round(sum(BC_phjromyta[,,,,,,46,,])/1000,-2)
apply(BC_phjromyta[1,,,,,,,,2:nAges], c(2,6), sum)[1:8,6:46]/1000
apply(BC_phjromyta[1,,,,,,,,2:nAges], c(2,6), sum)[1:8,6:46]/1000
xxx =
apply(BC_phjromyta[1,,,,,,,,2:nAges], c(2,6), sum)[1:8,6:46]/1000
xxx
colSums(xxx)
colSums(xxx[4:8,])
source('C:/CHASCO/PROJECTS/COAST_WIDE/buildModel.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/plot_SalmonProduction.r', echo=TRUE)
sum(NC_phjromyta[3:4,,3,,,,46,,3:6])
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_BasePeriodChinookAvailability.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/buildModel.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_BasePeriodChinookAvailability.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_deficitSummary.r', echo=TRUE)
load("simOutput.Rdata", verbose = FALSE)
nx = (apply(simNC_cspjya[1,1:nr,,ji,,]/1000000,c(1,3),sum))
nx = (apply(simNC_cspjya[1,1:100,,3,,]/1000000,c(1,3),sum))
qnx = t(apply(nx,2,function(xx){return(quantile(xx,probs=c(0.025,0.5,0.975)))}))
qnx
nx = (apply(simNC_cspjya[1,1:100,,3,,]/1000,c(1,3),sum))
nx = (apply(simNC_cspjya[1,1:100,,3,,3:6]/1000,c(1,3),sum))
qnx
nx = (apply(simNC_cspjya[1,1:200,,3,,3:6]/1000,c(1,3),sum))
sum(NC_phjromyta[,,3,,,,46,,3:6])
sum(NC_phjromyta[,,3,,,,45,,3:6])
source('C:/CHASCO/PROJECTS/COAST_WIDE/buildModel.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/COAST_WIDE/buildModel.r', echo=TRUE)
sum(NC_phjromyta[,,3,,,,46,,3:6])
sum(NC_phjromyta[,,3,,,,45,,3:6])
source('C:/CHASCO/PROJECTS/COAST_WIDE/buildModel.r', echo=TRUE)
nx = (apply(simNC_cspjya[1,1:nr,,ji,,]/1000000,c(1,3),sum))
nx = (apply(simNC_cspjya[1,1:61,,3,,]/1000,c(1,3),sum))
nx
nx = (apply(simNC_cspjya[1,1:61,,3,,3:6]/1000,c(1,3),sum))
nx
nx = (apply(simNC_cspjya[1,1:61,,3,45,3:6]/1000,c(1),sum))
nx
hist(nx)
source('C:/CHASCO/PROJECTS/COAST_WIDE/results_plot_sensitivityByArea.r', echo=TRUE)
load("simOutput.Rdata", verbose = FALSE)
nx = (apply(simNC_cspjya[1,1:61,,3,45,3:6]/1000,c(1),sum))
mean(nx)
qnx = t(apply(nx,2,function(xx){return(quantile(xx,probs=c(0.025,0.5,0.975)))}))
quantile(nx,probs=c(0.025,0.5,0.975)
)
